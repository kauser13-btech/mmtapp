"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2799],{224:function(e,t,a){var s=a(7437),r=a(3145);t.Z=e=>{let{extraClass:t,isCheckout:a=!1}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-4 "+t,children:[a&&(0,s.jsx)(r.default,{className:"w-auto",src:"/images/mmt-sticker-2.png",alt:"Sticker",width:100,height:100}),!a&&(0,s.jsx)(r.default,{className:"w-auto",src:"/images/mmt-sticker-1.png",alt:"Sticker",width:100,height:100})]})}},5224:function(e,t,a){a.d(t,{Z:function(){return o}});var s=a(7437),r=a(2265);function o(e){let{children:t,isOpen:a,setIsOpen:o,title:l,scroll:n,width:i="w-[35rem] max-sm:w-full",position:c="left",background:d="bg-white",hideDrawerStyle:m=""}=e,[u,p]=(0,r.useState)(!1),h={left:{open:"-translate-x-0",close:"-translate-x-full"},right:{open:"translate-x-0",close:"translate-x-full"}},x={left:{open:"-translate-x-0",close:"-translate-x-full"},right:{open:"-translate-x-0",close:"translate-x-full"}};return((0,r.useEffect)(()=>(document.body.style.overflow=a?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[a]),(0,r.useEffect)(()=>{setTimeout(()=>{p(!0)},700)},[]),u)?(0,s.jsxs)("main",{className:"fixed overflow-hidden z-[99999] bg-gray-900 bg-opacity-50 inset-0 transform ease-in-out delay-100 ".concat(m,"\n    ").concat(a?"opacity-100 ".concat(h[c].open):"opacity-0 ".concat(h[c].close),"\n     "),children:[(0,s.jsx)("section",{className:"".concat(i," absolute h-svh shadow-xl duration-300 transform z-[60] \n      ").concat({left:"left-0",right:"right-0"}[c],"\n      ").concat(a?"".concat(x[c].open):"".concat(x[c].close),"\n      "),children:(0,s.jsxs)("div",{className:"".concat(d," h-svh overflow-hidden"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 pt-4 ".concat(""),children:[(0,s.jsx)("div",{}),(0,s.jsx)("h3",{children:l}),(0,s.jsx)("button",{onClick:()=>{o(!1)},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"black",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}),(0,s.jsx)("article",{className:"relative md-max:w-full md-min:w-[21.875rem] flex flex-col ".concat(n||"h-full"),children:t})]})}),(0,s.jsx)("section",{onClick:()=>{o(!1)},className:"w-screen h-screen !overflow-hidden cursor-pointer "})]}):null}},541:function(e,t,a){a.d(t,{Z:function(){return f}});var s=a(7437),r=a(3145);a(978);var o=a(8831),l=a(6174),n=a(9618),i=a(2265),c=a(144),d=a(149),m=e=>{let{data:t,productModal:a}=e,r=(0,d.tv)(),o=(e,t,s,o,l)=>{a?r.push("/product?type=".concat(a.type,"&color=").concat(a.color,"&sneaker=").concat(o,"&design=").concat(a.design)):r.push("/collection?brand=".concat(e,"&model=").concat(t,"&sub_model_category=").concat(s,"&sneaker=").concat(o,"&product_type=").concat(l,"&product_colors=&designs"))};return(0,s.jsx)(s.Fragment,{children:0!==t.length&&t.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex flex-col gap-4 cursor-pointer group",onClick:t=>o(e.brand,e.model,e.sub_model_category,e.slug,"T-shirt"),children:[(0,s.jsx)("div",{className:"size-[122px] flex items-center justify-center rounded-[10px] bg-[#E7E7E7]",children:(0,s.jsx)("img",{className:"w-20 h-auto group-hover:scale-110 duration-200",src:e.image_url,alt:e.sneaker_title})}),(0,s.jsxs)("p",{className:"w-[122px] font-roboto text-base font-normal max-lg:hidden text-title-work-card",children:[null==e?void 0:null===(t=e.sneaker_title)||void 0===t?void 0:t.substring(0,27),"..."]})]},e.id)})})},u=a(7648),p=e=>{let{data:t,error:a,productModal:r}=e,{getUser:o}=(0,c.C)();return(0,s.jsx)(s.Fragment,{children:o?(0,s.jsx)("div",{className:"flex flex-wrap gap-8 max-h-[408px] md:max-h-[544px] xl:max-h-96 overflow-y-auto",children:(0,s.jsx)(m,{data:t,productModal:r})}):(0,s.jsxs)("p",{className:"text-black/50 font-roboto xl:text-[22px] font-normal leading-none",children:["Please ",(0,s.jsx)(u.default,{className:"text-blue-400 underline",href:"/sign-in/",children:"login"})," or ",(0,s.jsx)(u.default,{className:"text-blue-400 underline",href:"/sign-up/",children:"register"})," to get your closet."]})})},h=a(44),x=a(8128),g=e=>{let{handleChangeSneaker:t,type:a,productModal:r,modalId:d}=e,{isOpen:m,toggle:u}=(0,n.Z)(),{getUser:g}=(0,c.C)(),f=(0,i.useRef)(null),[w,y]=(0,i.useState)(!1),{searchParams:v,setSearchParams:b,searchResults:j,fetchResults:N,page:k,hasMoreData:_,isLoading:Z,fetchData:C}=(0,l.Z)();(0,i.useEffect)(()=>{let e=new IntersectionObserver(async e=>{let[t]=e;t.isIntersecting&&await C()},{root:null,rootMargin:"10px",threshold:0});return f.current&&e.observe(f.current),()=>{f.current&&e.unobserve(f.current)}},[m,k,v]);let{getClosetData:S,data:P}=(0,x.M)(),{handleAddToCloset:E}=(0,o.Z)(),A=async e=>{"home"==a&&document.getElementById(d).close(),g||document.getElementById("sign-in-modal-in-search").showModal(),await E(a,e),y(!0),u(!1),S()};return(0,s.jsxs)("div",{className:"w-full flex flex-col gap-6 xl:gap-9 mt-6 lg:pr-14 lg:pt-16",children:[(0,s.jsx)("h2",{className:"font-roboto text-sm md:text-xl xl:text-2xl lg:font-medium text-title-work-card",children:"We got your T-Shirt and Design, Now tell us what shoes in your collection."}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 xl:gap-6",children:[(0,s.jsx)(h.Z,{toggle:u,handleChange:e=>{b(e.target.value)},searchParams:v,searchResults:j,fetchResults:N,bottom:f,hasMoreData:_,handlePostCloset:A,handleChangeSneaker:t,isOpen:m,isLoading:Z,type:a}),(0,s.jsx)("h3",{className:"text-black font-roboto text-sm md:text-base xl:text-[22px] font-normal leading-none",children:"Or, Select item from your closet:"})]}),(0,s.jsx)(p,{productModal:r,data:P})]})},f=e=>{let{modalHandle:t,handleChangeSneaker:a,type:o,productModal:l,modalId:n}=e;return(0,s.jsxs)("div",{className:"flex gap-14 p-8 min-h-full lg:p-0",children:[(0,s.jsx)("div",{className:"w-full h-[727px] max-lg:hidden",children:(0,s.jsx)(r.default,{className:"w-auto h-[727px] object-cover",src:"/images/sneakerModal.webp",alt:"image",width:100,height:100})}),(0,s.jsx)(g,{modalHandle:t,handleChangeSneaker:a,type:o,productModal:l,modalId:n})]})}},3562:function(e,t,a){var s=a(7437),r=a(2265);a(3145);var o=a(9978),l=a(4809),n=a(3775),i=a(9501),c=a(149),d=a(7061);t.Z=e=>{let{modalHandle:t,sendOtpEmail:a,type:m}=e,[u,p]=(0,r.useState)(3),[h,x]=(0,r.useState)(0),[g,f]=(0,r.useState)(!1),{register:w,handleSubmit:y,formState:{errors:v},setError:b}=(0,i.cI)(),{performPost:j}=(0,n.Z)(),N=(0,c.tv)(),k=async e=>{if(""===a)return d.Am.error("something went wrong with otp email",{autoClose:3e3,theme:"light",transition:Bounce});{let t;let s={email:a,otp:e.otp},r=d.Am.loading("Please wait...");try{(t="ResetPassword"===m?await j("api/v1/otp-validate",s):await j("api/v1/email-verify",s)).success?"ResetPassword"===m?(localStorage.setItem("resetPasswordData",JSON.stringify({email:a,otp:e.otp})),d.Am.update(r,{render:t.message,type:"success",isLoading:!1,autoClose:3e3}),setTimeout(()=>{N.push("/resetpassword"),_()},0)):(d.Am.update(r,{render:t.message,type:"success",isLoading:!1,autoClose:3e3}),setTimeout(()=>{N.push("/sign-in"),_()},0)):b("otp",{type:"manual",message:"Otp is not valid. Please check the code."})}catch(e){console.error("Error while handling OTP request:",e)}}};(0,r.useEffect)(()=>{let e=setInterval(()=>{h>0?x(h-1):u>0?(p(u-1),x(59)):(clearInterval(e),f(!0))},1e3);return()=>clearInterval(e)},[u,h]);let _=()=>{document.getElementById("otp_modal").close()},Z=async()=>{let e;let t={email:a},s=d.Am.loading("Please wait...");(e="ResetPassword"===m?await j("api/v1/password/otp-mail",t):await j("api/v1/verify-email-otp",t)).success?(d.Am.update(s,{render:e.message,type:"success",isLoading:!1,autoClose:3e3}),f(!1),p(3),x(0),b("otp",{type:"manual",message:""})):(d.Am.update(s,{render:"Please register as new user.",type:"warning",isLoading:!1,autoClose:3e3}),N.push("/sign-up"))};return(0,s.jsx)(o.Z,{onClick:t,modalId:"otp_modal",type:"otp",background:"bg-white max-w-[905px] h-fit p-4 sm:h-[328px] p-0 overflow-hidden flex ",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center max-w-[685px]  m-auto",children:[(0,s.jsx)("img",{src:"/images/otp/otp.svg",width:176,height:176,className:"w-24 md:w-[176px]"}),(0,s.jsxs)("div",{className:"sm:ml-12",children:[(0,s.jsx)("p",{className:"font-semi text-black text-xl mt-4 sm:text-3xl ",children:"ResetPassword"==m?"Two-factor authentication":"Verify your email"}),(0,s.jsxs)("p",{className:"text-black mt-2 ",children:["A verification code has been sent to your email. This code will be valid for ",u," minute",1!==u&&"s"," and ",h," ","second",1!==h&&"s","."]})," ",g?(0,s.jsx)("button",{className:"text-sm mt-4 text-black hover:underline",onClick:e=>Z(),children:"Resend OTP"}):(0,s.jsx)("button",{className:"text-gray-200 text-sm mt-4 underline",disabled:!0,children:"Resend OTP"}),(0,s.jsx)("form",{onSubmit:y(k),children:(0,s.jsxs)("div",{className:" sm:relative",children:[(0,s.jsx)("div",{className:"w-full sm:w-80",children:(0,s.jsx)(l.Z,{name:"otp",type:"number",placeholder:"OTP code",register:w,notRequired:!0,error:v.otp})}),(0,s.jsx)("button",{type:"submit",className:"mt-4 w-full sm:mt-0 sm:absolute sm:w-fit sm:right-10 sm:top-0 btn bg-orange-primary text-white font-medium hover:bg-yellow-primary hover:text-black",children:"Submit"})]})})]})]})})}},7165:function(e,t,a){a.r(t);var s=a(7437),r=a(2265),o=a(9501),l=a(4809),n=a(5007),i=a(7061),c=a(149),d=a(4131),m=a(7648),u=a(144),p=a(8128),h=a(3562),x=a(3775);t.default=e=>{let{type:t,handleSignInModal:a}=e,{getClosetData:g}=(0,p.M)(),[f,w]=(0,r.useState)(!1),{register:y,handleSubmit:v,setValue:b,formState:{errors:j}}=(0,o.cI)(),N=(0,c.tv)(),{updateUser:k}=(0,u.C)(),[_,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{_&&document.getElementById("otp_modal").showModal()},[_]);let C=()=>{Z(!0),document.getElementById("otp_modal").showModal()},[S,P]=(0,r.useState)(""),{performPost:E}=(0,x.Z)(),A=async e=>{let a=i.Am.loading("Please wait...",{position:"top-right"});w(!0);let s=await fetch("".concat("https://api.matchmytees.com","/api/v1/login"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)});if(s.ok){let e=await s.json();d.Z.set("mmt_user_session",e.authorisation.token),d.Z.set("mmt_user_name",e.user.name),d.Z.set("mmt_user_id",e.user.id),k(),g(),i.Am.update(a,{render:"Successfully login!",type:"success",isLoading:!1,autoClose:3e3,position:"top-right"}),"signInModal"==t?document.getElementById("sign-in-modal-in-search").close():N.push("/user/dashboard")}else if(401===s.status){let t=await s.json();if(w(!1),"email_verification_error"===t.status){i.Am.update(a,{render:t.message,type:"warning",isLoading:!1,autoClose:2e3,position:"top-right"});let s=i.Am.loading("Please wait...",{position:"top-right"}),r={email:e.email};P(e.email),await E("api/v1/verify-email-otp",r),i.Am.update(s,{render:"Please check your email for otp code",type:"success",isLoading:!1,autoClose:2e3,position:"top-right"}),C()}else"error"===t.status&&(w(!1),i.Am.update(a,{render:"Please provide correct credential",type:"error",isLoading:!1,autoClose:2e3,position:"top-right"}))}else console.log("API Request Failed"),w(!1),i.Am.update(a,{render:"Please provide correct credential",type:"error",isLoading:!1,autoClose:2e3,position:"top-right"})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("form",{onSubmit:v(A),className:"flex items-center flex-col gap-10",children:[(0,s.jsxs)("div",{className:"flex items-center flex-col gap-4 w-full",children:[(0,s.jsx)(l.Z,{type:"email",name:"email",placeholder:"Email",register:y,error:j.email,notRequired:!0}),(0,s.jsx)(l.Z,{type:"password",name:"password",placeholder:"Password",register:y,error:j.password,isForgot:!0,notRequired:!0})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)(n.Z,{name:"Login",type:"submit",disable:f}),(0,s.jsxs)("h3",{className:"font-roboto text-sm md:font-medium text-sub-work-card md:text-base",children:["New customer?"," ",(0,s.jsx)(m.default,{className:"underline",href:"/sign-up",children:"Create an account"})]})]})]}),(0,s.jsx)(h.Z,{modalHandle:()=>{Z(!1),document.getElementById("otp_modal").close()},sendOtpEmail:S})]})}},5394:function(e,t,a){var s=a(7437),r=a(7165);t.Z=e=>{let{handleSignInModal:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("h2",{className:"font-staatliches text-center text-black text-xl lg:text-2xl",children:"Login to MatchMyTees"}),(0,s.jsx)(r.default,{handleSignInModal:t,type:"signInModal"})]})}},5007:function(e,t,a){var s=a(7437);t.Z=e=>{let{name:t,type:a,disable:r}=e;return(0,s.jsx)("button",{type:a,className:"btn w-full max-w-fit md:max-w-full border-none text-white bg-orange-primary hover:bg-orange-primary/80   active:bg-orange-primary/90 text-sm font-normal md:font-medium md:text-base xl:text-[24px] disabled:bg-orange-primary",disabled:r,children:r?(0,s.jsx)("span",{className:"loading loading-spinner loading-sm !bg-white"}):t})}},4809:function(e,t,a){var s=a(7437),r=a(7648);t.Z=e=>{let{type:t,name:a,placeholder:o,register:l,value:n,error:i,isForgot:c=!1,handleChange:d,errorsHandle:m,notRequired:u,defaultValue:p,validation:h}=e,x=e=>{let t=e.target.value;t.length>2&&d&&d(t)};return(0,s.jsxs)("main",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col w-full gap-0.5",children:[(0,s.jsx)("input",{className:"w-full h-12 px-4 border border-[#B1B5B8] focus:outline focus:outline-[#00A6AC] rounded-md text-black placeholder:text-[#989898] ".concat("discount"==a&&"bg-[#FBFBFB]"),type:t,name:a,value:n,defaultValue:p,placeholder:o,...l(a,{onChange:e=>{x(e)},...u&&{required:"".concat(a," is required"),...h}})}),c&&(0,s.jsx)(r.default,{className:"self-end font-roboto font-medium underline text-sm text-sub-work-card",href:"/forgotpassword",children:"Forgot password?"})]}),i&&(0,s.jsx)("p",{className:"font-roboto font-medium underline text-sm text-red-400 first-letter:uppercase",children:i.message})]})}},4021:function(e,t,a){a.d(t,{Z:function(){return u},j:function(){return p}});var s=a(7437),r=a(2265),o=a(4131),l=a(3775),n=a(5960),i=()=>{let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)([]),[i,c]=(0,r.useState)([]),[d,m]=(0,r.useState)([]),{performGet:u,performPost:p}=(0,l.Z)(),{performGet:h,performPost:x}=(0,n.Z)(),g=e=>{s(t=>t.filter(t=>t.id!==e))},f=(e,t)=>{m(a=>a.map((a,s)=>s===e?t:a))},w=(e,t)=>{s(a=>a.map(a=>a.id===e.data.items[t].id?e.data.items[t]:a))},y=async()=>{t(!0);let e=o.Z.get("cart-token"),a=o.Z.get("mmt_user_session");if(e)try{let t;if(a){let{response:a}=await h("cart?cart=".concat(e));t=a}else t=await u("cart?cart=".concat(e));t.success&&(t.cart_change?o.Z.set("cart-token",t.data.uid):(c(t.data),s(t.data.items),m(Array(t.data.items.length).fill(!1))))}catch(e){console.error("Error fetching cart data:",e)}finally{t(!1)}},v=async(e,t,a,s,r,o,l,n,i,c,d)=>{let m;"decrement"==d?m={id:t,color:a,design:s,size:r,sneaker:o,quantity:l>1?l-1:l,title:n,product_type:i,cart:c}:"increment"===d&&(m={id:t,color:a,design:s,size:r,sneaker:o,quantity:l+1,title:n,product_type:i,cart:c}),f(e,!0);let u=await p("cart",m);u.success&&(w(u,e),y()),f(e,!1)};return{isLoading:e,cartData:a,cartDetailData:i,isCartUpdate:d,fetchCartData:y,handleRemoveCartData:g,handleQuantity:v,handleIsCartUpdate:f,handleRemoveCartData:g}},c=()=>{let{performGet:e,performPost:t}=(0,l.Z)(),[a,s]=(0,r.useState)(!1);return{loading:a,handleToCart:async(a,r,l,n,i)=>{s(!0);let c=o.Z.get("cart-token");if(!c){let t=await e("cart");200===t.status&&(o.Z.set("cart-token",t.data.uid),c=o.Z.get("cart-token"))}let d={quantity:a,sneaker:r.sneaker.slug,size:l.variants[i],color:r.color,cart:c,product_type:n.type,title:r.title,design:n.design};await t("cart",d),s(!1)}}},d=()=>{let{performPost:e}=(0,l.Z)();return{handleRemove:async(t,a,s,r,o)=>{r(a,!0),(await e("cart/remove",{cart:o,id:t})).success&&(s(t),r(a,!1))}}};let m=(0,r.createContext)(),u=e=>{let{children:t}=e,[a,o]=(0,r.useState)(!1),l=i(),n=c(),u=d();return(0,s.jsx)(m.Provider,{value:{...l,...n,...u,openCart:a,setOpenCart:o},children:t})},p=()=>{let e=(0,r.useContext)(m);if(!e)throw Error("useCart must be used within a CartProvider");return e}},5960:function(e,t,a){var s=a(4131),r=a(9376);t.Z=()=>{let e=(0,r.useRouter)(),t=async(t,a,r)=>{let o=s.Z.get("mmt_user_session");try{let l;if(!o)return e.push("/sign-in"),{response:null,error:"User not authenticated"};let n="".concat("https://api.matchmytees.com","/").concat(t),i={Accept:"application/json",Authorization:"Bearer ".concat(o)};"GET"!==a&&(i["Content-Type"]="application/json");let c={method:a,headers:i,body:"GET"!==a?JSON.stringify(r):void 0};l=await fetch(n,c);let d=await l.json();if(401===l.status)return s.Z.remove("mmt_user_name"),s.Z.remove("mmt_user_session"),s.Z.remove("mmt_user_id"),e.push("/sign-in"),{response:null,error:"Unauthorized token"};return{response:d,error:null}}catch(e){return console.log("Error in API call:",e),{response:null,error:e}}};return{performGet:async e=>t(e,"GET"),performPost:async(e,a)=>t(e,"POST",a),performPut:async(e,a)=>t(e,"PUT",a),performDelete:async e=>t(e,"DELETE")}}}}]);