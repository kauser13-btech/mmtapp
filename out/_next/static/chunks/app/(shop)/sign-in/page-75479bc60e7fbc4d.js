(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2981],{2431:function(){},6412:function(e,t,r){Promise.resolve().then(r.bind(r,7165)),Promise.resolve().then(r.bind(r,1523)),Promise.resolve().then(r.bind(r,49))},9978:function(e,t,r){"use strict";var o=r(7437),s=r(9376),n=r(2265);t.Z=e=>{let{modalId:t="my_modal_2",children:r,background:a="bg-white",onClick:i,type:l="general"}=e,c=(0,s.usePathname)(),u=(0,s.useSearchParams)();return(0,n.useEffect)(()=>{t&&"promotional_modal_id"!==t&&document.getElementById(t).close()},[c,u]),(0,o.jsxs)("dialog",{id:t,className:"modal",children:[(0,o.jsx)("div",{className:"modal-box ".concat(a),children:r}),"otp"!==l&&(0,o.jsx)("form",{onClick:i,method:"dialog",className:"modal-backdrop",children:(0,o.jsx)("button",{children:"close"})})]})}},3562:function(e,t,r){"use strict";var o=r(7437),s=r(2265);r(3145);var n=r(9978),a=r(4809),i=r(3775),l=r(9501),c=r(149),u=r(7061);t.Z=e=>{let{modalHandle:t,sendOtpEmail:r,type:d}=e,[m,p]=(0,s.useState)(3),[f,h]=(0,s.useState)(0),[g,x]=(0,s.useState)(!1),{register:y,handleSubmit:w,formState:{errors:v},setError:b}=(0,l.cI)(),{performPost:j}=(0,i.Z)(),P=(0,c.tv)(),C=async e=>{if(""===r)return u.Am.error("something went wrong with otp email",{autoClose:3e3,theme:"light",transition:Bounce});{let t;let o={email:r,otp:e.otp},s=u.Am.loading("Please wait...");try{(t="ResetPassword"===d?await j("api/v1/otp-validate",o):await j("api/v1/email-verify",o)).success?"ResetPassword"===d?(localStorage.setItem("resetPasswordData",JSON.stringify({email:r,otp:e.otp})),u.Am.update(s,{render:t.message,type:"success",isLoading:!1,autoClose:3e3}),setTimeout(()=>{P.push("/resetpassword"),N()},0)):(u.Am.update(s,{render:t.message,type:"success",isLoading:!1,autoClose:3e3}),setTimeout(()=>{P.push("/sign-in"),N()},0)):b("otp",{type:"manual",message:"Otp is not valid. Please check the code."})}catch(e){console.error("Error while handling OTP request:",e)}}};(0,s.useEffect)(()=>{let e=setInterval(()=>{f>0?h(f-1):m>0?(p(m-1),h(59)):(clearInterval(e),x(!0))},1e3);return()=>clearInterval(e)},[m,f]);let N=()=>{document.getElementById("otp_modal").close()},_=async()=>{let e;let t={email:r},o=u.Am.loading("Please wait...");(e="ResetPassword"===d?await j("api/v1/password/otp-mail",t):await j("api/v1/verify-email-otp",t)).success?(u.Am.update(o,{render:e.message,type:"success",isLoading:!1,autoClose:3e3}),x(!1),p(3),h(0),b("otp",{type:"manual",message:""})):(u.Am.update(o,{render:"Please register as new user.",type:"warning",isLoading:!1,autoClose:3e3}),P.push("/sign-up"))};return(0,o.jsx)(n.Z,{onClick:t,modalId:"otp_modal",type:"otp",background:"bg-white max-w-[905px] h-fit p-4 sm:h-[328px] p-0 overflow-hidden flex ",children:(0,o.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center max-w-[685px]  m-auto",children:[(0,o.jsx)("img",{src:"/images/otp/otp.svg",width:176,height:176,className:"w-24 md:w-[176px]"}),(0,o.jsxs)("div",{className:"sm:ml-12",children:[(0,o.jsx)("p",{className:"font-semi text-black text-xl mt-4 sm:text-3xl ",children:"ResetPassword"==d?"Two-factor authentication":"Verify your email"}),(0,o.jsxs)("p",{className:"text-black mt-2 ",children:["A verification code has been sent to your email. This code will be valid for ",m," minute",1!==m&&"s"," and ",f," ","second",1!==f&&"s","."]})," ",g?(0,o.jsx)("button",{className:"text-sm mt-4 text-black hover:underline",onClick:e=>_(),children:"Resend OTP"}):(0,o.jsx)("button",{className:"text-gray-200 text-sm mt-4 underline",disabled:!0,children:"Resend OTP"}),(0,o.jsx)("form",{onSubmit:w(C),children:(0,o.jsxs)("div",{className:" sm:relative",children:[(0,o.jsx)("div",{className:"w-full sm:w-80",children:(0,o.jsx)(a.Z,{name:"otp",type:"number",placeholder:"OTP code",register:y,notRequired:!0,error:v.otp})}),(0,o.jsx)("button",{type:"submit",className:"mt-4 w-full sm:mt-0 sm:absolute sm:w-fit sm:right-10 sm:top-0 btn bg-orange-primary text-white font-medium hover:bg-yellow-primary hover:text-black",children:"Submit"})]})})]})]})})}},7165:function(e,t,r){"use strict";r.r(t);var o=r(7437),s=r(2265),n=r(9501),a=r(4809),i=r(5007),l=r(7061),c=r(149),u=r(4131),d=r(7648),m=r(144),p=r(8128),f=r(3562),h=r(3775);t.default=e=>{let{type:t,handleSignInModal:r}=e,{getClosetData:g}=(0,p.M)(),[x,y]=(0,s.useState)(!1),{register:w,handleSubmit:v,setValue:b,formState:{errors:j}}=(0,n.cI)(),P=(0,c.tv)(),{updateUser:C}=(0,m.C)(),[N,_]=(0,s.useState)(!1);(0,s.useEffect)(()=>{N&&document.getElementById("otp_modal").showModal()},[N]);let E=()=>{_(!0),document.getElementById("otp_modal").showModal()},[S,k]=(0,s.useState)(""),{performPost:A}=(0,h.Z)(),I=async e=>{let r=l.Am.loading("Please wait...",{position:"top-right"});y(!0);let o=await fetch("".concat("https://api.matchmytees.com","/api/v1/login"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)});if(o.ok){let e=await o.json();u.Z.set("mmt_user_session",e.authorisation.token),u.Z.set("mmt_user_name",e.user.name),u.Z.set("mmt_user_id",e.user.id),C(),g(),l.Am.update(r,{render:"Successfully login!",type:"success",isLoading:!1,autoClose:3e3,position:"top-right"}),"signInModal"==t?document.getElementById("sign-in-modal-in-search").close():P.push("/user/dashboard")}else if(401===o.status){let t=await o.json();if(y(!1),"email_verification_error"===t.status){l.Am.update(r,{render:t.message,type:"warning",isLoading:!1,autoClose:2e3,position:"top-right"});let o=l.Am.loading("Please wait...",{position:"top-right"}),s={email:e.email};k(e.email),await A("api/v1/verify-email-otp",s),l.Am.update(o,{render:"Please check your email for otp code",type:"success",isLoading:!1,autoClose:2e3,position:"top-right"}),E()}else"error"===t.status&&(y(!1),l.Am.update(r,{render:"Please provide correct credential",type:"error",isLoading:!1,autoClose:2e3,position:"top-right"}))}else console.log("API Request Failed"),y(!1),l.Am.update(r,{render:"Please provide correct credential",type:"error",isLoading:!1,autoClose:2e3,position:"top-right"})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("form",{onSubmit:v(I),className:"flex items-center flex-col gap-10",children:[(0,o.jsxs)("div",{className:"flex items-center flex-col gap-4 w-full",children:[(0,o.jsx)(a.Z,{type:"email",name:"email",placeholder:"Email",register:w,error:j.email,notRequired:!0}),(0,o.jsx)(a.Z,{type:"password",name:"password",placeholder:"Password",register:w,error:j.password,isForgot:!0,notRequired:!0})]}),(0,o.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,o.jsx)(i.Z,{name:"Login",type:"submit",disable:x}),(0,o.jsxs)("h3",{className:"font-roboto text-sm md:font-medium text-sub-work-card md:text-base",children:["New customer?"," ",(0,o.jsx)(d.default,{className:"underline",href:"/sign-up",children:"Create an account"})]})]})]}),(0,o.jsx)(f.Z,{modalHandle:()=>{_(!1),document.getElementById("otp_modal").close()},sendOtpEmail:S})]})}},5007:function(e,t,r){"use strict";var o=r(7437);t.Z=e=>{let{name:t,type:r,disable:s}=e;return(0,o.jsx)("button",{type:r,className:"btn w-full max-w-fit md:max-w-full border-none text-white bg-orange-primary hover:bg-orange-primary/80   active:bg-orange-primary/90 text-sm font-normal md:font-medium md:text-base xl:text-[24px] disabled:bg-orange-primary",disabled:s,children:s?(0,o.jsx)("span",{className:"loading loading-spinner loading-sm !bg-white"}):t})}},4809:function(e,t,r){"use strict";var o=r(7437),s=r(7648);t.Z=e=>{let{type:t,name:r,placeholder:n,register:a,value:i,error:l,isForgot:c=!1,handleChange:u,errorsHandle:d,notRequired:m,defaultValue:p,validation:f}=e,h=e=>{let t=e.target.value;t.length>2&&u&&u(t)};return(0,o.jsxs)("main",{className:"w-full",children:[(0,o.jsxs)("div",{className:"flex flex-col w-full gap-0.5",children:[(0,o.jsx)("input",{className:"w-full h-12 px-4 border border-[#B1B5B8] focus:outline focus:outline-[#00A6AC] rounded-md text-black placeholder:text-[#989898] ".concat("discount"==r&&"bg-[#FBFBFB]"),type:t,name:r,value:i,defaultValue:p,placeholder:n,...a(r,{onChange:e=>{h(e)},...m&&{required:"".concat(r," is required"),...f}})}),c&&(0,o.jsx)(s.default,{className:"self-end font-roboto font-medium underline text-sm text-sub-work-card",href:"/forgotpassword",children:"Forgot password?"})]}),l&&(0,o.jsx)("p",{className:"font-roboto font-medium underline text-sm text-red-400 first-letter:uppercase",children:l.message})]})}},8128:function(e,t,r){"use strict";r.d(t,{L:function(){return i},M:function(){return l}});var o=r(7437),s=r(2265),n=r(978);let a=(0,s.createContext)(),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)(!1),l=(0,n.Z)();return(0,o.jsx)(a.Provider,{value:{isClosetOpen:r,toggleCloset:e=>{i(e)},...l},children:t})},l=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useCloset must be used within a ClosetProvider");return e}},144:function(e,t,r){"use strict";r.d(t,{C:function(){return l},L:function(){return i}});var o=r(7437),s=r(2265),n=r(4915);let a=(0,s.createContext)(),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)((0,n.Z)());return(0,o.jsx)(a.Provider,{value:{getUser:r,updateUser:()=>{i((0,n.Z)())}},children:t})},l=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useUserName must be used within a UserNameProvider");return e}},978:function(e,t,r){"use strict";var o=r(2265),s=r(6362);t.Z=()=>{let[e,t]=(0,o.useState)([]),{performGet:r}=(0,s.Z)();return{getClosetData:async()=>{let{response:e,error:o}=await r("api/v1/closets");e&&e.success&&t(e.data)},data:e}}},4915:function(e,t,r){"use strict";var o=r(4131);t.Z=()=>o.Z.get("mmt_user_name")||null},3775:function(e,t){"use strict";t.Z=()=>({performGet:async e=>{try{return(await fetch("".concat("https://api.matchmytees.com","/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}})).json()}catch(e){console.log(e)}},performPost:async(e,t)=>{try{return(await fetch("".concat("https://api.matchmytees.com","/").concat(e),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)})).json()}catch(e){console.log(e)}},performPut:async(e,t)=>{try{return(await fetch("".concat("https://api.matchmytees.com","/").concat(e),{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()}catch(e){console.log(e)}},performDelete:async e=>{try{return(await fetch("".concat("https://api.matchmytees.com","/").concat(e),{method:"DELETE"})).json()}catch(e){console.log(e)}}})},6362:function(e,t,r){"use strict";var o=r(4131);t.Z=()=>{let e=async(e,t,r)=>{let s=o.Z.get("mmt_user_session");try{let o;if(!s)return{response:null,error:"User not authenticated"};let n="".concat("https://api.matchmytees.com","/").concat(e),a={Accept:"application/json",Authorization:"Bearer ".concat(s)};"GET"!==t&&(a["Content-Type"]="application/json");let i={method:t,headers:a,body:"GET"!==t?JSON.stringify(r):void 0};o=await fetch(n,i);let l=await o.json();if(401===o.status)return{response:null,error:"Unauthorized token"};return{response:l,error:null}}catch(e){return console.log("Error in API call:",e),{response:null,error:e}}};return{performGet:async t=>e(t,"GET"),performPost:async(t,r)=>e(t,"POST",r),performPut:async(t,r)=>e(t,"PUT",r),performDelete:async t=>e(t,"DELETE")}}},3145:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var o=r(8461),s=r.n(o)},8461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return i}});let o=r(7043),s=r(5346),n=r(5878),a=o._(r(5084));function i(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=n.Image},1523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let o=r(8993);function s(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new o.BailoutToCSRError(t);return r}},49:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return n}});let o=r(7437),s=r(544);function n(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,s.getExpectedRequestStore)("next/dynamic css"),n=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));n.push(...t)}}return 0===n.length?null:(0,o.jsx)(o.Fragment,{children:n.map(e=>(0,o.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},4131:function(e,t,r){"use strict";function o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)e[o]=r[o]}return e}r.d(t,{Z:function(){return s}});var s=function e(t,r){function s(e,s,n){if("undefined"!=typeof document){"number"==typeof(n=o({},r,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var i in n)n[i]&&(a+="; "+i,!0!==n[i]&&(a+="="+n[i].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+a}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],o={},s=0;s<r.length;s++){var n=r[s].split("="),a=n.slice(1).join("=");try{var i=decodeURIComponent(n[0]);if(o[i]=t.read(a,i),e===i)break}catch(e){}}return e?o[e]:o}},remove:function(e,t){s(e,"",o({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,o({},this.attributes,t))},withConverter:function(t){return e(o({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[2972,8003,5752,7061,9501,5878,2971,2117,1744],function(){return e(e.s=6412)}),_N_E=e.O()}]);